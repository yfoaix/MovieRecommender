var data = {
    "title": "å½±èäººè®¤è¯",
    "exam": [{
        "title": "å•é¡¹é€‰æ‹©é¢˜",
        "infos": null,
        "values": [{
            "type": 1,
            "questionStem": "ã€Šæ³°å¦å°¼å…‹å·ã€‹çš„å¯¼æ¼”æ˜¯è°ï¼Ÿ",
            "options": [
                "è©¹å§†æ–¯Â·å¡æ¢…éš†",
                "å²è’‚æ–‡Â·æ–¯çš®å°”ä¼¯æ ¼",
                "å¤§å«èŠ¬å¥‡"
            ],
            "answer": [
                "A"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "ä»¥ä¸‹å“ªä¸ªæ˜¯å²è’‚æ–‡æ–¯çš®å°”ä¼¯æ ¼çš„ä»£è¡¨ä½œ",
            "options": [
                "ä¾ç½—çºªå…¬å›­",
                "æ˜Ÿçƒå¤§æˆ˜",
                "å˜å½¢é‡‘åˆš"
            ],
            "answer": [
                "A"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "å“ªä½åäººæ¼”å‘˜å‚åŠ äº†å¥½è±åå½±ç‰‡ã€Šæˆ‘æ˜¯è°ã€‹ï¼Œå¹¶åœ¨å…¶ä¸­æ‹…ä»»ä¸»è§’",
            "options": [
                "æè¿æ°",
                "æˆé¾™",
                "æ´ªé‡‘å®"
            ],
            "answer": [
                "B"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "é’¢é“ä¾ çš„æ‰®æ¼”è€…æ˜¯",
            "options": [
                "æ±¤å§†å…‹é²æ–¯",
                "å°ç½—ä¼¯ç‰¹å”å°¼",
                "å¸ƒæ‹‰å¾·çš®ç‰¹"
            ],
            "answer": [
                "B"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "ç¾å›½çš„å¥½è±åç”µå½±å…¬å¸åè½åœ¨å“ªä¸ªåŸå¸‚",
            "options": [
                "åç››é¡¿",
                "åˆ©ç¦å°¼äºšå·æ´›æ‰çŸ¶å¸‚éƒŠåŒº",
                "çº½çº¦"
            ],
            "answer": [
                "B"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "08å¹´å¥¥æ–¯å¡è·å¥–æœ€å¤šçš„ä¸€éƒ¨ç”µå½±ï¼Œå ªç§°å¥‡è¿¹",
            "options": [
                "è´«æ°‘çªŸçš„ç™¾ä¸‡å¯Œç¿",
                "æœ¬æ°æ˜å·´é¡¿",
                "è™è ä¾ å‰ä¼ "
            ],
            "answer": [
                "A"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "â€œäººç”Ÿå°±åƒå·§å…‹åŠ›ï¼Œæ²¡äººçŸ¥é“ä¸‹ä¸€å—æ˜¯ä»€ä¹ˆå‘³é“â€ï¼Œè¿™å¥å°è¯å‡ºäºå“ªä¸€éƒ¨ç¾å›½ç”µå½±ï¼Œå¹¶ä¸”è·å¾—äº†å¤šé¡¹å¥¥æ–¯å¡å¥–ï¼Œè‡³ä»Šä»ç„¶æ˜¯äººä»¬è°ˆè®ºçš„è¯é¢˜",
            "options": [
                "é˜¿ç”˜æ­£ä¼ ",
                "è‚–ç”³å…‹çš„æ•‘èµ",
                "æ¥šé—¨çš„ä¸–ç•Œ"
            ],
            "answer": [
                "A"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "æ¸¯æ¾³å°åœ°åŒºçš„å½±ç‰‡æ˜¯ä¸æ˜¯è¿›å£å½±ç‰‡",
            "options": [
                "æ˜¯",
                "ä¸æ˜¯",
                "å°æ¹¾æ˜¯"
            ],
            "answer": [
                "A"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "ä¸­å›½ç”µå½±é‡‘é¸¡å¥–æ˜¯äºå“ªå¹´åˆ›åŠçš„",
            "options": [
                "1979",
                "1980",
                "1981"
            ],
            "answer": [
                "C"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "ã€Šæ•™çˆ¶ã€‹ä¸­ï¼Œæ•™çˆ¶çš„ä¸‰å„¿å­æ˜¯è°",
            "options": [
                "æ¡‘å°¼",
                "å¼—é›·å¾·",
                "éº¦å…‹"
            ],
            "answer": [
                "C"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "ã€Šé‡‘è‰è„±å£³ã€‹ä¸­ï¼Œç”·ä¸»è¶Šç‹±è¿‡ç¨‹ä¸­éœ€è¦çš„ä¸€å—é‡‘å±çš„è¦æ±‚æ˜¯",
            "options": [
                "ä¸€å¯¸å®½",
                "ä¸¤å¯¸å®½",
                "ä¸‰å¯¸å®½"
            ],
            "answer": [
                "C"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "2014å¹´ï¼Œä¸­å›½å½±ç‰‡ã€Šç™½æ—¥ç„°ç«ã€‹è·å¾—ä»€ä¹ˆç”µå½±èŠ‚æœ€ä½³å½±ç‰‡é‡‘ç†Šå¥–",
            "options": [
                "å¨å°¼æ–¯",
                "æŸæ—",
                "ä¸œäº¬"
            ],
            "answer": [
                "B"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "ç”µå½±ã€Šéœ¸ç‹åˆ«å§¬ã€‹ï¼ˆ1993å¹´ï¼‰ç”±é™ˆå‡¯æ­Œå¯¼æ¼”ï¼Œå¼ å›½è£ã€å¼ ä¸°æ¯…ã€å·©ä¿ä¸»æ¼”ï¼Œæ›¾äº1993å¹´è£è·æ³•å›½æˆ›çº³å›½é™…ç”µå½±èŠ‚æœ€é«˜å¥–é¡¹â€œé‡‘æ£•æ¦ˆå¤§å¥–â€ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å›½å”¯ä¸€éƒ¨è·æ­¤æ®Šè£çš„å½±ç‰‡ã€‚åœ¨å‰§ä¸­å¼ å›½è£æ‰€æ‰®æ¼”çš„æ˜¯é‚£ä¸ªè§’è‰²ï¼Ÿ",
            "options": [
                "æ®µå°æ¥¼",
                "å°è±†å­",
                "ç¨‹è¶è¡£"
            ],
            "answer": [
                "C"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "2004å¹´ï¼Œç”µå½±é¢‘é“èŠ‚ç›®ä¸­å¿ƒä¸ä¸Šæµ·å›½é™…ç”µå½±èŠ‚å…±åŒæ‰“é€ äº†ï¼ˆï¼‰ï¼Œæ—¨åœ¨æ‰¶æŒä¸­å›½ç”µå½±äº§ä¸šã€æ¨åŠ¨å›½äº§å½±ç‰‡å‘å±•",
            "options": [
                "åè¯­ç”µå½±ä¼ åª’å¤§å¥–",
                "ç™¾åˆå¥–",
                "ä¸­å›½ç”µå½±åè¡¨å¥–"
            ],
            "answer": [
                "A"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "åŠŸå¤«çš‡å¸æè¿æ°çš„æˆåä½œæ˜¯ä¸‹é¢å“ªä¸€éƒ¨",
            "options": [
                "å°‘æ—å¯º",
                "æ–¹ä¸–ç‰",
                "éª‡å®¢å¸å›½"
            ],
            "answer": [
                "A"
            ],
            "analysis": null
        },
        {
            "type": 1,
            "questionStem": "ç³»åˆ—ç”µå½±ã€ŠåŠ å‹’æ¯”æµ·ç›—ã€‹æ˜¯å“ªé—´ç”µå½±å…¬å¸çš„ä½œå“",
            "options": [
                "åçº³",
                "å¥½è±å",
                "è¿ªå£«å°¼"
            ],
            "answer": [
                "C"
            ],
            "analysis": null
        }
         ]
    }]
};

//document.write("<script type='text/javascript' src='b.js'></script>");

function test (test_id) {
    if (test_id != "") {
        //$.ajax({
        //type : 'POST',
        //url : 'data/exam.json',
        //data : {'testId':test_id},
        //dataType : "json",
        //success : function(data){
        console.log(data);
        var titleB = data.title;
        var exam = data.exam;
        var test_box = '';

        $.each(exam, function (h, exam) {
            var title = exam.title;
            var info = exam.infos != null ? '<h4 class="jxz-title">' + exam.infos + '</h4>' : '';
            var test = exam.values;
            var topic_box = '';

            $.each(test, function (i, topic) {//1å•é€‰2å¤šé€‰3åˆ¤æ–­4å¡«ç©º5é—®ç­”8è®ºè¿°é¢˜6å®Œå‹å¡«ç©º7é˜…è¯»ç†è§£
                var type = topic.type;
                var options = topic.options;
                var answer = topic.answer;
                var analysis = topic.analysis == null || topic.analysis == "" ? "æ— " : topic.analysis;
                var option_box = '';//é¢˜ç›®

                if (type == 1) {
                    //answer_op = '';
                    $.each(options, function (j, option) {
                        var op = convert(j);
                        option_box += `
                                    <div class="jxz-option radio">
                                        <label>
                                            <input name="test`+ h + '' + i + `" type="radio" value="` + op + `"> ` + op + `ï¼š` + option + `
                                        </label>
                                    </div>
                                    `;
                    });

                } else if (type == 2) {
                    //answer_op = '';
                    $.each(options, function (j, option) {
                        var op = convert(j);
                        option_box += `
                                    <div class="jxz-option checkbox">
                                        <label>
                                            <input name="test`+ h + '' + i + `" type="checkbox" value="` + op + `"> ` + op + `ï¼š` + option + `
                                        </label>
                                    </div>
                                    `;
                    });


                } else if (type == 3) {

                    option_box = `
                                <div class="jxz-option radio">
                                    <label>
                                        <input name="test`+ h + '' + i + `" type="radio" value="1"> æ­£ç¡®
                                    </label>
                                </div>
                                <div class="jxz-option radio">
                                    <label>
                                        <input name="test`+ h + '' + i + `" type="radio" value="0"> é”™è¯¯
                                    </label>
                                </div>
                                `;
                } else if (type == 4) {

                    option_box += `
                                <div class="jxz-option">
                                    <textarea name="test`+ h + '' + i + `" class="form-control" style="width: 50%" rows="5" placeholder="ç­”æ¡ˆä»¥ç©ºæ ¼éš”å¼€"></textarea>
                                </div>
                                `;
                } else if (type == 5 || type == 8) {

                    option_box += `
                                <div class="jxz-option">
                                    <textarea name="test5" class="form-control" style="width: 50%" rows="5" placeholder=""></textarea>
                                </div>
                                `;
                } else if (type == 6) {

                    $.each(options, function (j, option) {
                        var op = convert(j);
                        option_box += `
                                    <div class="jxz-option radio-inline">
                                        <label>
                                            `+ op + `ï¼š` + option + `
                                        </label>
                                    </div>
                                    `;
                    });
                    option_box += `
                                <div class="jxz-option">
                                    <textarea name="test`+ h + '' + i + `" class="form-control" style="width: 50%" rows="5" placeholder="ç­”æ¡ˆä»¥ç©ºæ ¼éš”å¼€"></textarea>
                                </div>`;
                } else if (type == 7) {

                    $.each(options, function (j, option) {
                        var op = convert(j);
                        option_box += `
                                    <div class="jxz-option radio">
                                        <label>
                                            <input name="test`+ h + '' + i + `" type="radio" value="` + op + `"> ` + op + `ï¼š` + option + `
                                        </label>
                                    </div>
                                    `;
                    });
                }

                var answer_op = '';//ç­”æ¡ˆ
                if (type == 3) {
                    $.each(answer, function (i, aw) {
                        answer_op += aw == 1 ? "æ­£ç¡®" : "é”™è¯¯";
                    });
                } else {
                    $.each(answer, function (i, aw) {
                        answer_op += answer.length == (i + 1) ? aw : aw + " ";
                    });
                }
                topic_box += `
                            <div class="testCon" data-type="`+ type + `" data-answer="` + answer_op + `">
                                <h4 class="jxz-title">`+ topic.questionStem + `</h4>
                                `+ option_box + `
                                <div class="topic-answer">
                                   <p>æ‚¨çš„ç­”æ¡ˆï¼š<span class="userAnswer"></span></p>
                                   <p>æ­£ç¡®ç­”æ¡ˆï¼š`+ answer_op + `</p>
                                   <p>è§£æï¼š`+ analysis + `</p>
                                </div>
                            </div>
                            `;

            });
            test_box += `
                            <div class="jxz-box col-md-12">
                            <h4 class="tesTitle">`+ title + `</h4>
                            `+ info + `
                            `+ topic_box + `
                        </div>
                        `;
        });

        var test_html = `
                    <div class="page-header">
                        <h3 class="text-center">`+ titleB + `</h3>
                    </div>
                    <form class="" id="testForm">
                        <div class="test-form-box">
                            `+ test_box + `
                        </div>
                        <div class="form-group assignment">
                            <button id="submit-v" type="button" class="btn btn-primary" style="margin-right:3%;">äº¤å·</button>
                            <button id="quit-v" type="button" class="btn btn-primary" style="margin-left:3%;">æ”¾å¼ƒ</button>
                        </div>
                    </form>`;
        $('#testArea').html(test_html)
        //},
        //error:function(data){
        //alert("ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•");
        //}
        //});
    } else {
        swal("è¯•é¢˜è·å–å¤±è´¥ï¼", {
            icon: "error",
        });
    }
}
//äº¤å·
function assignment () {
    var score = 0;
    $(".testCon h4").css("color", "#555");
    var _temp_tip = "yes";
    var tall = 0;
    $(".testCon").each(function (i) {
        var type = $(this).attr("data-type");
        if (type == 2) {
            if ($(this).find('input[type="checkbox"]:checked').val() == undefined) {
                _temp_tip = "no";
                $(this).find("h4").css("color", "#00B895");
            }
        } else if (type == 1 || type == 3 || type == 7) {
            if ($(this).find('input[type="radio"]:checked').val() == undefined) {
                _temp_tip = "no";
                $(this).find("h4").css("color", "#00B895");
            }
        } else if (type == 4 || type == 5 || type == 8 || type == 6) {
            if ($.trim($(this).find('textarea').val()) == '') {
                _temp_tip = "no";
                $(this).find("h4").css("color", "#00B895");
            }
        }
        tall++;
    });

    if (_temp_tip == "no") {
        // swal({
        //     title: "ç¡®å®šäº¤å·ï¼Ÿ",
        //     text: "æ‚¨çš„é¢˜ç›®è¿˜æ²¡æœ‰åšå®Œ",
        //     icon: "warning",
        //     buttons: true,
        //     dangerMode: true,
        // }).then((exit) => {
        //     if (exit) {
        //         $("#myModal").modal("hide");
        //         return;
        //     }
        // });
    }

    var err = 0;
    $(".testCon").each(function (i) {
        var type = $(this).attr("data-type");
        var aw = $(this).attr("data-answer");
        var set_answer = '';

        if (type == 2) {

            var ckAarray = $(this).find('input[type="checkbox"]:checked');
            var ans = '';
            ckAarray.each(function (i, item) {
                ans += ckAarray.length == i + 1 ? item.value : item.value + " ";
            });
            if (ans != aw) {
                $(this).find("h4").css("color", "red");
                err++;
            }
            set_answer = ans;

        } else if (type == 1 || type == 7) {

            var rd = $(this).find('input[type="radio"]:checked').val();
            if (rd != aw) {
                $(this).find("h4").css("color", "red");
                err++;
            }
            set_answer = rd;

        } else if (type == 3) {

            var rpd = $(this).find('input[type="radio"]:checked').val();
            rpd = rpd == 0 ? "é”™è¯¯" : (rpd == 1 ? "æ­£ç¡®" : "");
            if (rpd != aw) {
                $(this).find("h4").css("color", "red");
                err++;
            }
            set_answer = rpd;

        } else if (type == 4 || type == 5 || type == 8 || type == 6) {

            var textVal = $.trim($(this).find('textarea').val());
            if (textVal != aw) {
                $(this).find("h4").css("color", "red");
                err++;
            }
            set_answer = textVal;
        }

        $(this).find("span.userAnswer").text(set_answer);

    });
    $(".topic-answer").show();
    if (err <0) {
        swal("å¾ˆå¯æƒœè®¤è¯å¤±è´¥", "å½±èäººä¾ç„¶ä¸æ‚¨åŒåœ¨", "error");
    }
    else {
        alert( /*[[@{/indentity/v}]]*/ )
        $.post(/*[[@{/indentity/v}]]*/  "http://localhost:8080/selfspace/identity/v",
            {}, function (data, status) {
                if (data > 0) {
                    swal("æ­å–œä½ è®¤è¯é€šè¿‡", "ä»ä»Šå¤©å¼€å§‹ä½ ä¹Ÿæ˜¯ä¸€ä½å½±èäººğŸ˜ï¼", "success");
                }
                else {
                    swal("é­é‡æœªçŸ¥é”™è¯¯ï¼Œæ•°æ®åº“æœªå½•å…¥è®¤è¯ä¿¡æ¯ï¼", {
                        icon: "error",
                    });
                }
            });
    }
    $("#myModal").modal("hide");
    // $()
}
//æ•°å­—è½¬æ¢æˆå¤§å†™å­—æ¯
function convert (num) {
    num = num + 1;
    return num <= 26 ? String.fromCharCode(num + 64) : convert(~~((num - 1) / 26)) + convert(num % 26 || 26);
}