<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.thymeleaf.org" layout:decorator="/shared/_layout">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<title>Search</title>
	<!--只用添加layout中没有链接的部分-->
	<link rel="stylesheet" href="/css/search-select.css" />

</head>

<body>
	<section layout:fragment="content">
		<!-- search section -->
		<section>
			<div style="height: 60px;"></div>
			<div class="filter-wrap container">
				<ul class="filter-type clearfix order">
					<li class="filter-item active"><a onclick="OnOrderClick(0)" href="javascript:;">综合排序</a></li>
					<li class="filter-item"><a onclick="OnOrderClick(1)" href="javascript:;">最多点击</a></li>
					<li class="filter-item"><a onclick="OnOrderClick(2)" href="javascript:;">最新发布</a></li>
					<li class="filter-item"><a onclick="OnOrderClick(3)" href="javascript:;">最多评论</a></li>
					<li class="filter-item"><a onclick="OnOrderClick(4)" href="javascript:;">最多收藏</a></li>
				</ul>
				<ul class="filter-type clearfix duration">
					<li class="filter-item active"><a onclick="OnDurationClick(0)" href="javascript:;">全部时长</a></li>
					<li class="filter-item"><a onclick="OnDurationClick(1)" href="javascript:;">60分钟以下</a></li>
					<li class="filter-item"><a onclick="OnDurationClick(2)" href="javascript:;">60-120分钟</a></li>
					<li class="filter-item"><a onclick="OnDurationClick(3)" href="javascript:;">120-200分钟</a></li>
					<li class="filter-item"><a onclick="OnDurationClick(4)" href="javascript:;">200分钟以上</a></li>
				</ul>
				<ul class="filter-type clearfix time">
					<li class="filter-item active"><a onclick="OnYearClick(0)" href="javascript:;">全部年代</a></li>
					<li class="filter-item"><a onclick="OnYearClick(1)" href="javascript:;">60s前</a></li>
					<li class="filter-item"><a onclick="OnYearClick(2)" href="javascript:;">60s</a></li>
					<li class="filter-item"><a onclick="OnYearClick(3)" href="javascript:;">70s</a></li>
					<li class="filter-item"><a onclick="OnYearClick(4)" href="javascript:;">80s</a></li>
					<li class="filter-item"><a onclick="OnYearClick(5)" href="javascript:;">90s</a></li>
					<li class="filter-item"><a onclick="OnYearClick(6)" href="javascript:;">00s</a></li>
					<li class="filter-item"><a onclick="OnYearClick(7)" href="javascript:;">10s</a></li>
					<li class="filter-item"><a onclick="OnYearClick(8)" href="javascript:;">20s</a></li>
				</ul>
				<ul class="filter-type clearfix language">
					<li class="filter-item active"><a onclick="OnLanguageClick(0)" href="javascript:;">全部语言</a></li>
					<li class="filter-item"><a onclick="OnLanguageClick(1)" href="javascript:;">汉语</a></li>
					<li class="filter-item"><a onclick="OnLanguageClick(2)" href="javascript:;">粤语</a></li>
					<li class="filter-item"><a onclick="OnLanguageClick(3)" href="javascript:;">英语</a></li>
					<li class="filter-item"><a onclick="OnLanguageClick(4)" href="javascript:;">法语</a></li>
					<li class="filter-item"><a onclick="OnLanguageClick(5)" href="javascript:;">德语</a></li>
					<li class="filter-item"><a onclick="OnLanguageClick(6)" href="javascript:;">西班牙语</a></li>
					<li class="filter-item"><a onclick="OnLanguageClick(7)" href="javascript:;">日语</a></li>
					<li class="filter-item"><a onclick="OnLanguageClick(8)" href="javascript:;">韩语</a></li>
					<li class="filter-item"><a onclick="OnLanguageClick(9)" href="javascript:;">其他</a></li>
				</ul>
				<ul class="filter-type clearfix type">
					<li class="filter-item active"><a onclick="OnGenreClick(0)" href="javascript:;">全部类型</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(1)" href="javascript:;">喜剧</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(2)" href="javascript:;">爱情</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(3)" href="javascript:;">动作</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(4)" href="javascript:;">惊悚</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(5)" href="javascript:;">科幻</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(6)" href="javascript:;">奇幻</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(7)" href="javascript:;">战争</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(8)" href="javascript:;">灾难</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(9)" href="javascript:;">悬疑</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(10)" href="javascript:;">记录</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(11)" href="javascript:;">人物</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(12)" href="javascript:;">公路</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(13)" href="javascript:;">音乐</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(14)" href="javascript:;">家庭</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(15)" href="javascript:;">动画</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(16)" href="javascript:;">西部</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(17)" href="javascript:;">音乐</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(18)" href="javascript:;">微电影</a></li>
					<li class="filter-item"><a onclick="OnGenreClick(19)" href="javascript:;">意识流</a></li>
				</ul>
			</div>
		</section>
		<section id="result" style="padding-bottom: 30px;">
			<div class="container tm-container-gallery">
				<div class="row" style="padding-bottom: 20px;">
					<div class="col-12">
						<div class="mx-auto tm-gallery-container">
							<div id="resultElement" class="grid">
								<a th:each="movie : ${Movies}" th:href="'/movieinfo/'+ ${movie.movieId}">
									<figure class="effect-honey">
										<img th:src="${movie.imgUrl}" alt="Image" class="img-fluid">
										<figcaption>
											<h3><i><i th:text="'导演:'+ ${movie.directors}"></i><br><span
														th:text="'类型:'+ ${movie.genres}"></span><br> <i
														th:text="'评分:'+${movie.score}"></i>
													<li class="fas fa-star"></li>
												</i></h3>
										</figcaption>
										<p th:text="${movie.moiveName}"></p>
									</figure>
								</a>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="offset-md-3 col-md-7">
						<!-- 处理页数小于等于7 的情况 -->
						<ul th:if="${(totalPages le 7)&&(totalPages gt 0)}" class="pagination">
							<li th:if="${pageIndex eq 1}" class="page-item disabled"><a class="page-link" href="#">上一页</a>
							</li>
							<li th:if="${pageIndex gt 1}" class="page-item">
								<a class="page-link" th:href="@{/users(pageIndex=${pageIndex}-1,size=${size})}">上一页</a>
							</li>
							<li th:each="index:${#numbers.sequence(1,totalPages)}" th:classappend="${index eq pageIndex}?'active'" class="page-item">
											<a th:href="@{/users(pageIndex=${index},size=${size})}" class="page-link"  th:text="${index}"></a>
										</li>
										<li th:if="${pageIndex eq totalPages}" class="page-item disabled">
											<a class="page-link" href="#">下一页</a>
										</li>
										<li th:if="${pageIndex lt totalPages}" class="page-item">
											<a class="page-link" th:href="@{/users(pageIndex=${pageIndex}+1,size=${size})}">下一页</a>
										</li>
									</ul>
									<!-- 处理页数大于7 的情况 -->
									<ul th:if="${totalPages gt 7}" class="pagination">
										<li th:if="${pageIndex eq 1}" class="page-item disabled">
											<a class="page-link" href="#">上一页</a>
										</li>
										<li th:if="${pageIndex gt 1}" class="page-item">
											<a class="page-link" th:href="@{/users(pageIndex=${pageIndex}-1,size=${size})}">上一页</a>
										</li>
										<!-- 首页 -->
										<li th:classappend="${pageIndex eq 1}?'active'" class="page-item">
											<a class="page-link" th:href="@{/users(pageIndex=1,size=${size})}">1</a>
										</li>
										<!-- 当前页面小于等于4 -->
										<li th:if="${pageIndex le 4}" th:each="index:${#numbers.sequence(2,5)}" th:classappend="${index eq pageIndex}?'active'" class="page-item">
											<a th:href="@{/users(pageIndex=${index},size=${size})}" class="page-link"  th:text="${index}"></a>
										</li>
										<li th:if="${pageIndex le 4}" class="page-item">
											<a  class="page-link" th:href="@{/users(pageIndex=6,size=${size})}">...</a>
										</li>
										<!-- 最后一页与当前页面之差小于等于3 -->
										<li th:if="${totalPages-pageIndex le 3}" class="page-item">
											<a  class="page-link" th:href="@{/users(pageIndex=${totalPages-5},size=${size})}">...</a>
										</li>
										<li th:if="${totalPages-pageIndex le 3}" th:each="index:${#numbers.sequence(totalPages-4,totalPages-1)}" th:classappend="${index eq pageIndex}?'active'" class="page-item">
											<a th:href="@{/users(pageIndex=${index},size=${size})}" class="page-link"  th:text="${index}"></a>
										</li>
										<!-- 最后一页与当前页面之差大于3 且当前页面大于4 -->
										<li th:if="${(pageIndex gt 4) && (totalPages-pageIndex gt 3)}" class="page-item">
											<a class="page-link" th:href="@{/users(pageIndex=${pageIndex-2},size=${size})}">...</a>
										</li>
										<li th:if="${(pageIndex gt 4) && (totalPages-pageIndex gt 3)}" th:each="index:${#numbers.sequence(pageIndex-1,pageIndex+1)}" th:classappend="${index eq pageIndex}?'active'" class="page-item">
											<a class="page-link" th:href="@{/users(pageIndex=${index},size=${size})}" th:text="${index}"></a>
										</li>
										<li th:if="${(pageIndex gt 4) && (totalPages-pageIndex gt 3)}" class="page-item">
											<a class="page-link" th:href="@{/users(pageIndex=${pageIndex+2},size=${size})}">...</a>
										</li>
										<!-- 尾页 -->
										<li th:classappend="${pageIndex eq totalPages}?'active'" class="page-item">
											<a class="page-link" th:href="@{/users(pageIndex=${totalPages},size=${size})}" th:text="${totalPages}">尾页</a>
										</li>
										<li th:if="${pageIndex eq totalPages}" class="page-item disabled"><a class="page-link" href="#">下一页</a></li>
										<li th:if="${pageIndex lt totalPages}" class="page-item">
											<a class="page-link" th:href="@{/users(pageIndex=${pageIndex}+1,size=${size})}">下一页</a>
										</li>
										<div class="input-group" style="height: 38px;width: 150px;">
											<input type="number" min="1" th:max="${totalPages}" th:value="${pageIndex}" class="form-control toPage">                    <div class="input-group-append">                        
											<button type="button" class="btn btn-primary toUrl">跳转</button>                    
										</div>                
									</div>             
								</ul>        
							</div>    
						</div>
				</section>
			</section>
	<div layout:fragment="script">
		<script type="text/javascript" >
			$(".order li").click(function () { 
				$(".order li").removeClass("active"); 
				$(this).addClass("active"); 
			})
			$(".duration li").click(function () { 
				$(".duration li").removeClass("active"); 
				$(this).addClass("active"); 
			})
			$(".type li").click(function () { 
				$(".type li").removeClass("active"); 
				$(this).addClass("active"); 
			})
			$(".time li").click(function () { 
				$(".time li").removeClass("active"); 
				$(this).addClass("active"); 
			})
			$(".language li").click(function () { 
				$(".language li").removeClass("active"); 
				$(this).addClass("active"); 
			})
			$(".pagination .num").click(function () { 
				$(".pagination .num").removeClass("active"); 
				$(this).addClass("active"); 
			})

			
			function OnOrderClick(num){
				
			}
			function OnDurationClick(num){
			}
			function OnGenreClick(num){
			}
			function OnYearClick(num){
			}
			function OnLanguageClick(num){
			}

			function GetQueryString(name)
			{
				var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)"); //这个正则是寻找&+url参数名字=值+&&可以不存在。
				var r = window.location.search.substr(1).match(reg);//search,查询？后面的参数，并匹配正则
				if(r!=null)return  unescape(r[2]); return null;
			}
		</script>
	</div>
	
</body>

</html>